#!/bin/bash
echo Creating Submissions
aws dynamodb create-table --table-name Submissions --attribute-definitions AttributeName=id,AttributeType=S AttributeName=userId,AttributeType=N AttributeName=referenceLookup,AttributeType=S --key-schema AttributeName=id,KeyType=HASH AttributeName=userId,KeyType=RANGE --global-secondary-indexes '[{"IndexName":"referenceLookup-index","KeySchema":[{"AttributeName":"referenceLookup","KeyType":"HASH"},{"AttributeName":"userId","KeyType":"RANGE"}],"Projection":{"ProjectionType":"ALL"}, "ProvisionedThroughput": {"ReadCapacityUnits": 2, "WriteCapacityUnits": 2}}]' --region us-east-1 --provisioned-throughput ReadCapacityUnits=4,WriteCapacityUnits=2 --profile $AWS_PROFILE --endpoint-url http://localhost:8000

aws dynamodb put-item --table-name Submissions --item '{"createdAt": {"N": "1452164432"},"createdBy": {"N": "22781893"},"data": {"S":"{\"method\":\"DESIGN_CHALLENGE_ZIP_FILE\",\"method\":\"DESIGN_CHALLENGE_ZIP_FILE\",\"files\":[{\"name\":\"submission.zip\",\"path\":\"submissions/55e6a2b3-6255-406f-9fdb-30b157a92eb7/submission.zip\",\"preSignedUploadUrl\":\"https://topcoder-dev-media.s3.amazonaws.com/submissions/55e6a2b3-6255-406f-9fdb-30b157a92eb7/submission.zip?x-amz-security-token=AQoDYXdzEIv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEa4ANi0YVnrz1dAtXAGPoOnPZ6J0gslByp%2BgNgb4N7JOku%2Fsv3VSYvl3h92gZzK2gXrXVRtgxsB7MtCKmeZLYdZnpZMkETVVwmpJf77YQm3Kzfpm%2BqOye0XFkjL2rOt%2FSMElJsVxoi%2BBBKUsnid7mQFeiyyW%2FIl63hXc5PYeN1PrXhYPbONwXA2bz5yvhA4dnLZ37Cv8xjSAubd%2FJhXNClmqg%2F4Me3yzo40PUsDXuGZ7gC8jNjWQNGbAH5E3Sh%2F1g3lc6eKsoxrIUgLxXZbTH9fP%2B%2FA0LUZptCC3u6llV1i7w2e4ibKf9LJfRCDU2UHzGt4qTGa9en7AxsN%2FdmHF4rHQOwoM0weEOtW0JDBKTKa2MLRgwibFlKnf%2BpLhFtJlHSZ0MlW5hy%2FT72Q%2Fii2Q%2Bt%2BeFIv2aWlCkBw51B4GElAXaJTxONYAD%2BnxI2nsFe5676LlE9wmIJZN%2F2LiJF2csTGdNuYHXaRodCrL1B3%2F5TK0KJplwnzx8jeHK68a3ym%2F15TwqWEwdMhOixMYvSY617iY2H1Iuw%2F%2F8H5%2BVzTUtXJDqdZTFO8yzIZqC%2BNP25IeBMTNOHfVVpbmwsVUZzUHjsuxz9DnNJMI0RfIKjm6RFBPvFyTKovjCF6DNDfkBd4I6dvBEg3ee4tAU%3D&AWSAccessKeyId=ASIAJWNIOHCDDTKRNUFQ&Expires=1452165332&Signature=UU6w4wLWzrAc1mvUK7ndBr%2B4cYE%3D\",\"status\":\"PENDING\",\"type\":\"SUBMISSION_ZIP\",\"mediaType\":\"application/octet-stream\",\"size\":null},{\"name\":\"source.zip\",\"path\":\"submissions/55e6a2b3-6255-406f-9fdb-30b157a92eb7/source.zip\",\"preSignedUploadUrl\":\"https://topcoder-dev-media.s3.amazonaws.com/submissions/55e6a2b3-6255-406f-9fdb-30b157a92eb7/source.zip?x-amz-security-token=AQoDYXdzEIv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEa4ANi0YVnrz1dAtXAGPoOnPZ6J0gslByp%2BgNgb4N7JOku%2Fsv3VSYvl3h92gZzK2gXrXVRtgxsB7MtCKmeZLYdZnpZMkETVVwmpJf77YQm3Kzfpm%2BqOye0XFkjL2rOt%2FSMElJsVxoi%2BBBKUsnid7mQFeiyyW%2FIl63hXc5PYeN1PrXhYPbONwXA2bz5yvhA4dnLZ37Cv8xjSAubd%2FJhXNClmqg%2F4Me3yzo40PUsDXuGZ7gC8jNjWQNGbAH5E3Sh%2F1g3lc6eKsoxrIUgLxXZbTH9fP%2B%2FA0LUZptCC3u6llV1i7w2e4ibKf9LJfRCDU2UHzGt4qTGa9en7AxsN%2FdmHF4rHQOwoM0weEOtW0JDBKTKa2MLRgwibFlKnf%2BpLhFtJlHSZ0MlW5hy%2FT72Q%2Fii2Q%2Bt%2BeFIv2aWlCkBw51B4GElAXaJTxONYAD%2BnxI2nsFe5676LlE9wmIJZN%2F2LiJF2csTGdNuYHXaRodCrL1B3%2F5TK0KJplwnzx8jeHK68a3ym%2F15TwqWEwdMhOixMYvSY617iY2H1Iuw%2F%2F8H5%2BVzTUtXJDqdZTFO8yzIZqC%2BNP25IeBMTNOHfVVpbmwsVUZzUHjsuxz9DnNJMI0RfIKjm6RFBPvFyTKovjCF6DNDfkBd4I6dvBEg3ee4tAU%3D&AWSAccessKeyId=ASIAJWNIOHCDDTKRNUFQ&Expires=1452165332&Signature=DbFvc5R%2BSINY8NDmxjCCF1LU3FM%3D\",\"status\":\"PENDING\",\"type\":\"SOURCE_ZIP\",\"mediaType\":\"application/octet-stream\",\"size\":null},{\"name\":\"02am_ReviewPageCompleted.png\",\"path\":\"submissions/55e6a2b3-6255-406f-9fdb-30b157a92eb7/02am_ReviewPageCompleted.png\",\"preSignedUploadUrl\":\"https://topcoder-dev-media.s3.amazonaws.com/submissions/55e6a2b3-6255-406f-9fdb-30b157a92eb7/02am_ReviewPageCompleted.png?x-amz-security-token=AQoDYXdzEIv%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEa4ANi0YVnrz1dAtXAGPoOnPZ6J0gslByp%2BgNgb4N7JOku%2Fsv3VSYvl3h92gZzK2gXrXVRtgxsB7MtCKmeZLYdZnpZMkETVVwmpJf77YQm3Kzfpm%2BqOye0XFkjL2rOt%2FSMElJsVxoi%2BBBKUsnid7mQFeiyyW%2FIl63hXc5PYeN1PrXhYPbONwXA2bz5yvhA4dnLZ37Cv8xjSAubd%2FJhXNClmqg%2F4Me3yzo40PUsDXuGZ7gC8jNjWQNGbAH5E3Sh%2F1g3lc6eKsoxrIUgLxXZbTH9fP%2B%2FA0LUZptCC3u6llV1i7w2e4ibKf9LJfRCDU2UHzGt4qTGa9en7AxsN%2FdmHF4rHQOwoM0weEOtW0JDBKTKa2MLRgwibFlKnf%2BpLhFtJlHSZ0MlW5hy%2FT72Q%2Fii2Q%2Bt%2BeFIv2aWlCkBw51B4GElAXaJTxONYAD%2BnxI2nsFe5676LlE9wmIJZN%2F2LiJF2csTGdNuYHXaRodCrL1B3%2F5TK0KJplwnzx8jeHK68a3ym%2F15TwqWEwdMhOixMYvSY617iY2H1Iuw%2F%2F8H5%2BVzTUtXJDqdZTFO8yzIZqC%2BNP25IeBMTNOHfVVpbmwsVUZzUHjsuxz9DnNJMI0RfIKjm6RFBPvFyTKovjCF6DNDfkBd4I6dvBEg3ee4tAU%3D&AWSAccessKeyId=ASIAJWNIOHCDDTKRNUFQ&Expires=1452165332&Signature=%2Fo7rbC09t8bQIWUoAvFFi5o389Q%3D\",\"status\":\"PENDING\",\"type\":\"DESIGN_COVER\",\"mediaType\":\"image/png\",\"size\":null}],\"stockArts\":[{\"description\":\"dummy\",\"sourceUrl\":\"www.stockart.com\",\"fileNumber\":\"12345\"}],\"fonts\":[{\"name\":\"somefont\",\"sourceUrl\":\"http://somefont\",\"source\":\"FONTS_DOT_COM\"}],\"submitterComments\":\"\",\"submitterRank\":1}"},"id": {"S": "55e6a2b3-6255-406f-9fdb-30b157a92eb7"},"reference": {"S": "{\"type\":\"CHALLENGE\",\"id\":\"30049240\",\"type\":\"CHALLENGE\",\"phaseType\":\"SUBMISSION\",\"phaseId\":732865}"},"referenceLookup": {"S": "CHALLENGE30049240"},"status": {"S": "INITIATED"},"updatedAt": {"N": "1452164432"},"updatedBy": {"N": "22781893"},"userId": {"N": "22781893"}}' --endpoint-url http://localhost:8000